services:
  - type: web
    name: ai-resume-ranker
    env: python
    # Build command installs dependencies and pre-downloads NLTK resources
    buildCommand: |
      pip install -r requirements.txt
      python -c "import nltk; nltk.download('stopwords'); nltk.download('punkt')"
    
    # Start command runs the Streamlit application
    startCommand: streamlit run streamlit_app.py --server.port $PORT --server.enableCORS false --server.enableXsrfProtection false
    
    # Environment Variables
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.12
      - key: PORT
        value: 10000
    
    # Scaling/Resource Management (CRITICAL FOR SBERT)
    # Recommended plan: 'pro' (1GB+ RAM) to support the large SBERT model (all-mpnet-base-v2).
    plan: pro